# PECJ Benchmark ç»†ç²’åº¦æ—¶é—´æŒ‡æ ‡åˆ†ææŠ¥å‘Š

**æµ‹è¯•æ—¥æœŸ**: 2025-12-29  
**æµ‹è¯•é…ç½®**: 20,000 events (10K S + 10K R), çª—å£=10ms, æ»‘åŠ¨=5ms, 4çº¿ç¨‹  
**çª—å£æ•°é‡**: 387ä¸ªçª—å£  
**Joinç»“æœ**: 13,856æ¡

---

## ğŸ“Š å…³é”®å‘ç°æ€»ç»“

### æ•´ä½“æ€§èƒ½å¯¹æ¯”
- **Plugin Mode æ¯” Integrated Mode å¿« 1.87x**
- ä¸¤ç§æ¨¡å¼äº§ç”Ÿç›¸åŒçš„Joinç»“æœ (13,856æ¡)
- Plugin Mode ä½¿ç”¨æ›´å°‘çš„å†…å­˜ (-92.3%)

---

## ğŸ” ç»†ç²’åº¦æ—¶é—´åˆ†è§£ (æ¯«ç§’)

### å®Œæ•´æ—¶é—´å¯¹æ¯”è¡¨

| é˜¶æ®µ | Integrated Mode | Plugin Mode | å·®å¼‚ | èƒœè€… | åˆ†æ |
|------|-----------------|-------------|------|------|------|
| **Total Time** | 2444.89 ms | 1306.91 ms | **-46.5%** | Plugin | æ•´ä½“æ€§èƒ½å·®è·æ˜¾è‘— |
| **Setup Time** | 0.30 ms | 0.76 ms | +154.2% | Integrated | åˆå§‹åŒ–å¼€é”€å¯å¿½ç•¥ |
| **Data Preparation** | 10.57 ms | 21.13 ms | +99.9% | Integrated | æ’åºæ—¶é—´å·®å¼‚å° |
| **Data Access** | 718.21 ms | 41.93 ms | **-94.2%** | Plugin | ğŸ”¥ **æœ€å¤§ç“¶é¢ˆï¼** |
| **Pure Compute** | 1675.83 ms | 1220.68 ms | **-27.2%** | Plugin | è®¡ç®—æ•ˆç‡å·®å¼‚ |
| **Result Writing** | 11.92 ms | 0.05 ms | **-99.6%** | Plugin | å†™å…¥å¼€é”€å·¨å¤§ |
| **Query Time** | 0.00 ms | 0.01 ms | +358.6% | Integrated | å¯å¿½ç•¥ |
| **Cleanup Time** | 0.00 ms | 0.16 ms | - | - | å¯å¿½ç•¥ |

---

## ğŸ¯ æ ¸å¿ƒç“¶é¢ˆåˆ†æ

### 1. Data Access Timeï¼ˆæ•°æ®è®¿é—®ï¼‰- å…³é”®æ€§èƒ½å·®å¼‚

#### Integrated Mode: 718.21 ms (å æ€»æ—¶é—´ 29.4%)
```
æ¯ä¸ªçª—å£å¹³å‡: 718.21 / 387 = 1.86 ms/window
æ“ä½œï¼šDB query from LSM-Tree
ç‰¹ç‚¹ï¼š
  - ç£ç›˜ I/O æ“ä½œ
  - æ¯ä¸ªçª—å£éƒ½éœ€è¦æŸ¥è¯¢æ•°æ®åº“
  - LSM-Tree è¯»å–è·¯å¾„ï¼šMemTable -> Immutable MemTable -> SSTable (disk)
  - æ¶‰åŠååºåˆ—åŒ–ã€èŒƒå›´æ‰«æ
```

**ä¸ºä»€ä¹ˆè¿™ä¹ˆæ…¢ï¼Ÿ**
1. **ç£ç›˜ I/O å»¶è¿Ÿ**ï¼šå³ä½¿æœ‰ Page Cacheï¼Œç£ç›˜è®¿é—®ä»æ¯”å†…å­˜æ…¢ 100-1000x
2. **LSM-Tree è¯»æ”¾å¤§**ï¼šå¯èƒ½éœ€è¦è®¿é—®å¤šä¸ª SSTable å±‚çº§
3. **åºåˆ—åŒ–å¼€é”€**ï¼šä»å­˜å‚¨æ ¼å¼è½¬æ¢ä¸ºå†…å­˜å¯¹è±¡
4. **èŒƒå›´æŸ¥è¯¢å¼€é”€**ï¼šéœ€è¦æ‰«ææ—¶é—´èŒƒå›´å†…çš„æ‰€æœ‰æ•°æ®

#### Plugin Mode: 41.93 ms (å æ€»æ—¶é—´ 3.2%)
```
æ¯ä¸ªçª—å£å¹³å‡: 41.93 / 387 = 0.11 ms/window
æ“ä½œï¼šMemory scan and copy
ç‰¹ç‚¹ï¼š
  - çº¯å†…å­˜æ“ä½œ
  - çº¿æ€§æ‰«æå·²æ’åºçš„æ•°ç»„
  - æ•°æ®å·²ç»åœ¨ CPU Cache ä¸­
```

**ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ**
1. **å†…å­˜è®¿é—®**ï¼šè®¿é—® L1/L2/L3 Cache æˆ– RAMï¼Œå»¶è¿Ÿ 1-100ns
2. **é¡ºåºè®¿é—®**ï¼šCPU é¢„å–å‹å¥½ï¼ŒCacheå‘½ä¸­ç‡é«˜
3. **æ— åºåˆ—åŒ–**ï¼šæ•°æ®å·²ç»æ˜¯å¯ç”¨æ ¼å¼
4. **ç®€å•é€»è¾‘**ï¼šä»…éœ€æ—¶é—´æˆ³æ¯”è¾ƒ

#### æ€§èƒ½å·®è·ï¼š**Plugin æ¯” Integrated å¿« 17.13x** âš¡

---

### 2. Pure Compute Timeï¼ˆçº¯è®¡ç®—ï¼‰- ç®—æ³•æ€§èƒ½

#### Integrated Mode: 1675.83 ms (å æ€»æ—¶é—´ 68.6%)
```
æ¯ä¸ªçª—å£å¹³å‡: 1675.83 / 387 = 4.33 ms/window
æ¯ä¸ªJoinç»“æœ: 1675.83 / 13856 = 0.121 ms/join
```

#### Plugin Mode: 1220.68 ms (å æ€»æ—¶é—´ 93.4%)
```
æ¯ä¸ªçª—å£å¹³å‡: 1220.68 / 387 = 3.15 ms/window
æ¯ä¸ªJoinç»“æœ: 1220.68 / 13856 = 0.088 ms/join
```

**ä¸ºä»€ä¹ˆæœ‰å·®å¼‚ï¼Ÿ**

1. **æ•°æ®å±€éƒ¨æ€§**
   - Plugin: æ•°æ®åœ¨è¿ç»­çš„å†…å­˜å—ä¸­ï¼ŒCacheå‹å¥½
   - Integrated: æ•°æ®å¯èƒ½åˆ†æ•£åœ¨ä¸åŒçš„DBè®°å½•ä¸­

2. **æ•°æ®ç»“æ„å¼€é”€**
   - Plugin: è½»é‡çº§çš„ `std::vector<TimeSeriesData>`
   - Integrated: åŒ…è£…åœ¨æ•°æ®åº“è®°å½•å¯¹è±¡ä¸­ï¼Œå¯èƒ½æœ‰é¢å¤–å­—æ®µ

3. **å‡½æ•°è°ƒç”¨å¼€é”€**
   - Plugin: ç›´æ¥è°ƒç”¨ PECJ ç®—æ³•
   - Integrated: é€šè¿‡ Engine æŠ½è±¡å±‚è°ƒç”¨ï¼Œå¯èƒ½æœ‰é¢å¤–æ£€æŸ¥

#### æ€§èƒ½å·®è·ï¼š**Plugin æ¯” Integrated å¿« 1.37x**

---

### 3. Result Writing Timeï¼ˆç»“æœå†™å…¥ï¼‰

#### Integrated Mode: 11.92 ms (å æ€»æ—¶é—´ 0.5%)
```
æ“ä½œï¼šInsert into LSM-Tree (join_results table)
ç‰¹ç‚¹ï¼š
  - å†™å…¥æŒä¹…åŒ–å­˜å‚¨
  - å…ˆå†™å…¥ MemTable
  - è§¦å‘ WAL (Write-Ahead Log)
  - å¯èƒ½è§¦å‘ MemTable Flush
```

#### Plugin Mode: 0.05 ms (å æ€»æ—¶é—´ 0.004%)
```
æ“ä½œï¼šAccumulate in memory variable
ç‰¹ç‚¹ï¼š
  - ä»…ç´¯åŠ è®¡æ•°å™¨
  - æ— æŒä¹…åŒ–
  - æ— åºåˆ—åŒ–
```

#### æ€§èƒ½å·®è·ï¼š**Plugin æ¯” Integrated å¿« 222.34x** ğŸš€

**å…³é”®æ´å¯Ÿ**ï¼š
- Integrated Mode çš„ç»“æœå†™å…¥è™½ç„¶åªå  0.5%ï¼Œä½†ç»å¯¹æ—¶é—´ 11.92ms ä¸å¯å¿½ç•¥
- å¦‚æœéœ€è¦æŒä¹…åŒ–ç»“æœï¼Œè¿™æ˜¯å¿…è¦çš„ä»£ä»·
- Plugin Mode é€‚åˆåªéœ€è¦æœ€ç»ˆèšåˆç»“æœçš„åœºæ™¯

---

### 4. Data Preparation Timeï¼ˆæ•°æ®å‡†å¤‡ï¼‰

#### Integrated Mode: 10.57 ms (å æ€»æ—¶é—´ 0.4%)
```
æ“ä½œï¼š
  1. åˆå¹¶ S å’Œ R æµæ•°æ®
  2. æŒ‰ timestamp å’Œ key æ’åº
  3. æ ‡è®°æµæ¥æº
```

#### Plugin Mode: 21.13 ms (å æ€»æ—¶é—´ 1.6%)
```
æ“ä½œï¼š
  1. åˆ†åˆ«æ’åº S å’Œ R æµ
  2. è®¡ç®—æ—¶é—´èŒƒå›´
  3. è®¡ç®—çª—å£æ•°é‡
```

**ä¸ºä»€ä¹ˆ Plugin æ›´æ…¢ï¼Ÿ**
- ä¸¤æ¬¡æ’åº vs ä¸€æ¬¡æ’åº
- é¢å¤–çš„æ—¶é—´èŒƒå›´è®¡ç®—

**ä½†å½±å“å¾ˆå°**ï¼šéƒ½ä¸åˆ°æ€»æ—¶é—´çš„ 2%

---

## ğŸ“ˆ æ—¶é—´å æ¯”é¥¼å›¾åˆ†æ

### Integrated Mode æ—¶é—´åˆ†é…
```
æ€»æ—¶é—´: 2444.89 ms (100%)

â”œâ”€ Pure Compute       1675.83 ms  (68.6%)  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â”œâ”€ Data Access         718.21 ms  (29.4%)  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â”œâ”€ Result Writing       11.92 ms  ( 0.5%)  â–ˆ
â”œâ”€ Data Preparation     10.57 ms  ( 0.4%)  â–ˆ
â”œâ”€ Setup                 0.30 ms  ( 0.0%)  
â”œâ”€ Query                 0.00 ms  ( 0.0%)  
â””â”€ Cleanup               0.00 ms  ( 0.0%)  
```

**å…³é”®å‘ç°**ï¼š
- **98% çš„æ—¶é—´**èŠ±åœ¨ Compute + Data Access
- Data Access (29.4%) æ˜¯ç¬¬äºŒå¤§ç“¶é¢ˆ
- å¦‚æœèƒ½ä¼˜åŒ– Data Accessï¼Œå¯ä»¥æé€Ÿ ~40%

---

### Plugin Mode æ—¶é—´åˆ†é…
```
æ€»æ—¶é—´: 1306.91 ms (100%)

â”œâ”€ Pure Compute       1220.68 ms  (93.4%)  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â”œâ”€ Data Access          41.93 ms  ( 3.2%)  â–ˆâ–ˆ
â”œâ”€ Data Preparation     21.13 ms  ( 1.6%)  â–ˆ
â”œâ”€ Setup                 0.76 ms  ( 0.1%)  
â”œâ”€ Cleanup               0.16 ms  ( 0.0%)  
â”œâ”€ Result Writing        0.05 ms  ( 0.0%)  
â””â”€ Query                 0.01 ms  ( 0.0%)  
```

**å…³é”®å‘ç°**ï¼š
- **93.4% çš„æ—¶é—´**èŠ±åœ¨çº¯è®¡ç®—
- Data Access ä»…å  3.2%ï¼Œå‡ ä¹å¯å¿½ç•¥
- æ€§èƒ½ç“¶é¢ˆä¸»è¦åœ¨ Join ç®—æ³•æœ¬èº«

---

## ğŸ”¬ Legacy Timing å¯¹æ¯”åˆ†æ

### ä¸ºä»€ä¹ˆ Legacy Timing ä¸å‡†ç¡®ï¼Ÿ

#### Integrated Mode
```
Legacy Insert Time:  11.92 ms  (å®é™…æ˜¯ Result Writing)
Legacy Compute Time: 2422.00 ms (åŒ…å« Data Access + Pure Compute + Query)
```

**é—®é¢˜**ï¼š
- Insert Time è¯¯å¯¼æ€§åœ°åªè®¡ç®—äº†åˆå§‹æ•°æ®å†™å…¥
- Compute Time æ··æ‚äº†æ•°æ®è®¿é—®å’Œè®¡ç®—ï¼Œæ— æ³•åˆ†ç¦»ç“¶é¢ˆ

#### Plugin Mode (æ—§ç‰ˆæœ¬æœ‰ç¡¬ç¼–ç )
```
æ—§ä»£ç ï¼š
  result.timing.insert_time_ms = total_time * 0.3;  // ç¡¬ç¼–ç  30%
  result.timing.compute_time_ms = total_time * 0.7; // ç¡¬ç¼–ç  70%
```

**é—®é¢˜**ï¼š
- å®Œå…¨ä¸å‡†ç¡®çš„æ—¶é—´åˆ†é…
- æ— æ³•åæ˜ çœŸå®æ€§èƒ½ç‰¹å¾

#### æ–°ç‰ˆæœ¬ (ç»†ç²’åº¦æµ‹é‡)
```
ç°åœ¨çš„ Legacy æŒ‡æ ‡æ˜¯ä»ç»†ç²’åº¦æ—¶é—´æ¨å¯¼çš„ï¼š
  insert_time_ms = data_access_time_ms
  compute_time_ms = pure_compute_time_ms + result_writing_time_ms
```

---

## ğŸ’¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### é’ˆå¯¹ Integrated Mode

#### 1. ä¼˜åŒ– Data Access (æœ€é«˜ä¼˜å…ˆçº§ ğŸ”¥)
**å½“å‰ç“¶é¢ˆ**ï¼š718.21 ms / 2444.89 ms = 29.4%

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š

a) **å¼•å…¥ MemTable Cache**
```cpp
// ç¼“å­˜æœ€è¿‘çš„çª—å£æ•°æ®
class WindowDataCache {
    std::unordered_map<uint64_t, std::vector<TimeSeriesData>> cache;
    // Cacheæœ€è¿‘Nä¸ªçª—å£çš„æ•°æ®
};
```
**é¢„æœŸæå‡**ï¼šå‡å°‘ 50-70% çš„ DB æŸ¥è¯¢ï¼Œæ€»ä½“æé€Ÿ ~15-20%

b) **æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–**
```cpp
// ä¸€æ¬¡æŸ¥è¯¢å¤šä¸ªçª—å£çš„æ•°æ®
auto batch_results = db.query_batch(window_ranges);
```
**é¢„æœŸæå‡**ï¼šå‡å°‘å‡½æ•°è°ƒç”¨å¼€é”€ï¼Œæé€Ÿ ~5-10%

c) **æ•°æ®é¢„åŠ è½½**
```cpp
// åœ¨è®¡ç®—å‰é¢„åŠ è½½æ‰€æœ‰éœ€è¦çš„æ•°æ®åˆ°å†…å­˜
auto all_data = db.query(TimeRange(min_time, max_time));
```
**é¢„æœŸæå‡**ï¼šè½¬æ¢ä¸ºå†…å­˜è®¿é—®æ¨¡å¼ï¼Œæ¥è¿‘ Plugin Mode æ€§èƒ½

#### 2. ä¼˜åŒ– Pure Compute
**å½“å‰ç“¶é¢ˆ**ï¼š1675.83 ms / 2444.89 ms = 68.6%

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨ SIMD æŒ‡ä»¤åŠ é€Ÿæ•°æ®å¤„ç†
- ä¼˜åŒ–æ•°æ®ç»“æ„çš„å†…å­˜å¸ƒå±€
- å¹¶è¡ŒåŒ–çª—å£è®¡ç®—

**é¢„æœŸæå‡**ï¼š10-20% çš„è®¡ç®—æ€§èƒ½æå‡

---

### é’ˆå¯¹ Plugin Mode

#### 1. è¿›ä¸€æ­¥ä¼˜åŒ– Pure Compute
**å½“å‰ç“¶é¢ˆ**ï¼š1220.68 ms / 1306.91 ms = 93.4%

ç”±äº Plugin Mode çš„å…¶ä»–å¼€é”€éƒ½å¾ˆå°ï¼Œä¼˜åŒ–ç©ºé—´ä¸»è¦åœ¨ç®—æ³•æœ¬èº«ï¼š
- ä½¿ç”¨æ›´é«˜æ•ˆçš„ Join ç®—æ³•
- SIMD å‘é‡åŒ–
- GPU åŠ é€Ÿ

---

## ğŸ“Š Speedup åˆ†è§£åˆ†æ

### ä» Integrated åˆ° Plugin çš„æ€§èƒ½æå‡æ¥æº

```
æ€»æå‡: 1.87x (2444.89ms -> 1306.91ms, èŠ‚çœ 1137.98ms)

æ¥æºåˆ†è§£ï¼š
1. Data Access ä¼˜åŒ–è´¡çŒ®:
   èŠ‚çœæ—¶é—´ = 718.21 - 41.93 = 676.28 ms
   è´¡çŒ®ç‡ = 676.28 / 1137.98 = 59.4% â­â­â­

2. Pure Compute ä¼˜åŒ–è´¡çŒ®:
   èŠ‚çœæ—¶é—´ = 1675.83 - 1220.68 = 455.15 ms
   è´¡çŒ®ç‡ = 455.15 / 1137.98 = 40.0% â­â­

3. Result Writing ä¼˜åŒ–è´¡çŒ®:
   èŠ‚çœæ—¶é—´ = 11.92 - 0.05 = 11.87 ms
   è´¡çŒ®ç‡ = 11.87 / 1137.98 = 1.0% â­

4. Data Preparation æŸå¤±:
   é¢å¤–æ—¶é—´ = 21.13 - 10.57 = 10.56 ms
   æŸå¤±ç‡ = -0.9%
```

**å…³é”®ç»“è®º**ï¼š
- **59.4% çš„æ€§èƒ½æå‡æ¥è‡ªé¿å…ç£ç›˜ I/O**
- 40% æ¥è‡ªæ›´å¥½çš„è®¡ç®—æ•ˆç‡
- Data Access æ˜¯æœ€å¤§çš„ä¼˜åŒ–æœºä¼šç‚¹

---

## ğŸ“ ç ”ç©¶è®ºæ–‡å»ºè®®

### å½“å‰å®éªŒå¯ä»¥æ”¯æŒçš„è®ºæ–­

#### âœ… å¯ä»¥è¯´çš„ï¼ˆæœ‰æ•°æ®æ”¯æŒï¼‰

1. **"Plugin Mode æ¯” Integrated Mode å¿« 1.87x"**
   - æ•°æ®: 2444.89ms vs 1306.91ms
   - âœ… å‡†ç¡®

2. **"Data Access æ˜¯ Integrated Mode çš„ä¸»è¦ç“¶é¢ˆ"**
   - æ•°æ®: å  29.4% çš„æ—¶é—´ï¼ŒPlugin å¿« 17.13x
   - âœ… æœ‰åŠ›è¯æ®

3. **"LSM-Tree çš„ç£ç›˜ I/O æ˜¯å®æ—¶æ€§çš„å…³é”®ç“¶é¢ˆ"**
   - æ•°æ®: 718.21ms (disk) vs 41.93ms (memory)
   - âœ… å¼ºæœ‰åŠ›è¯æ®

4. **"é¿å…ç£ç›˜ I/O è´¡çŒ®äº† 59.4% çš„æ€§èƒ½æå‡"**
   - æ•°æ®: 676.28ms / 1137.98ms = 59.4%
   - âœ… é‡åŒ–è¯æ®

#### âŒ ä¸èƒ½è¯´çš„ï¼ˆè¯æ®ä¸è¶³ï¼‰

1. ~~"LSM-Tree å®Œå…¨ä¸é€‚åˆæµå¤„ç†"~~
   - å¤ªç»å¯¹ï¼Œæœªæµ‹è¯•æ‰€æœ‰ä¼˜åŒ–æ–¹æ¡ˆ
   - æ”¹ä¸ºï¼š"LSM-Tree åœ¨å½“å‰å®ç°ä¸‹å­˜åœ¨æ˜¾è‘—çš„å®æ—¶æ€§ç“¶é¢ˆ"

2. ~~"Plugin Mode çš„ç®—æ³•ä¼˜è¶Šæ€§"~~
   - Pure Compute åªå¿« 1.37xï¼Œå·®å¼‚ä¸å¤§
   - ä¸»è¦ä¼˜åŠ¿æ˜¯å†…å­˜è®¿é—®ï¼Œä¸æ˜¯ç®—æ³•

### å»ºè®®çš„è®ºæ–‡é™ˆè¿°

**æ¨èè¡¨è¿°**ï¼š
> "å®éªŒç»“æœè¡¨æ˜ï¼Œåœ¨å¤„ç† 20,000 äº‹ä»¶çš„æµå¼ Join åœºæ™¯ä¸­ï¼ŒPlugin Mode æ¯” Integrated Mode å¿« 1.87xã€‚é€šè¿‡ç»†ç²’åº¦çš„æ—¶é—´åˆ†è§£ï¼Œæˆ‘ä»¬å‘ç° **59.4% çš„æ€§èƒ½æå‡æ¥è‡ªäºé¿å…ç£ç›˜ I/O**ã€‚Integrated Mode åœ¨æ•°æ®è®¿é—®é˜¶æ®µè€—æ—¶ 718.21msï¼ˆå æ€»æ—¶é—´ 29.4%ï¼‰ï¼Œè€Œ Plugin Mode çš„å†…å­˜è®¿é—®ä»…éœ€ 41.93msï¼Œå¿« 17.13 å€ã€‚è¿™ä¸€ç»“æœé‡åŒ–äº† **LSM-Tree ç£ç›˜ I/O å¯¹æµå¤„ç†å®æ—¶æ€§çš„å½±å“**ï¼Œä¸ºå®æ—¶æµå¤„ç†ç³»ç»Ÿçš„æ¶æ„é€‰æ‹©æä¾›äº†å®è¯ä¾æ®ã€‚"

---

## ğŸ”§ å®éªŒæ”¹è¿›å»ºè®®

### 1. æ·»åŠ æ›´å¤šæµ‹è¯•åœºæ™¯

**æ•°æ®è§„æ¨¡å˜åŒ–**ï¼š
- å°æ•°æ®é›†: 1K events (æµ‹è¯•å¯åŠ¨å¼€é”€)
- ä¸­æ•°æ®é›†: 20K events (å½“å‰)
- å¤§æ•°æ®é›†: 100K, 1M events (æµ‹è¯•æ‰©å±•æ€§)

**çª—å£å¤§å°å˜åŒ–**ï¼š
- å°çª—å£: 1ms (é«˜é¢‘ç‡åœºæ™¯)
- ä¸­çª—å£: 10ms (å½“å‰)
- å¤§çª—å£: 100ms, 1s (æ‰¹å¤„ç†åœºæ™¯)

### 2. æ·»åŠ ç¼“å­˜ä¼˜åŒ–å®éªŒ

æµ‹è¯• Integrated Mode + MemTable Cache çš„æ€§èƒ½ï¼ŒéªŒè¯ä¼˜åŒ–æ•ˆæœã€‚

### 3. æ·»åŠ å†·å¯åŠ¨ vs çƒ­å¯åŠ¨å¯¹æ¯”

å½“å‰æµ‹è¯•åŒ…å« warmupï¼Œåº”è¯¥åˆ†åˆ«æµ‹è¯•ï¼š
- Cold Start: ç¬¬ä¸€æ¬¡è¿è¡Œï¼ˆPage Cache ç©ºï¼‰
- Warm Start: ç¬¬äºŒæ¬¡è¿è¡Œï¼ˆPage Cache æœ‰æ•°æ®ï¼‰

---

## ğŸ“ æ€»ç»“

### æ ¸å¿ƒå‘ç°

1. **Data Access æ˜¯å…³é”®ç“¶é¢ˆ**
   - Integrated Mode: 718.21ms (29.4%)
   - Plugin Mode: 41.93ms (3.2%)
   - å·®è·: 17.13x

2. **æ€§èƒ½æå‡ä¸»è¦æ¥è‡ªå†…å­˜è®¿é—®**
   - 59.4% çš„åŠ é€Ÿæ¥è‡ªé¿å…ç£ç›˜ I/O
   - 40% æ¥è‡ªæ›´å¥½çš„è®¡ç®—æ•ˆç‡

3. **Pure Compute å·®å¼‚ä¸å¤§**
   - Plugin ä»…å¿« 1.37x
   - ä¸»è¦å› ä¸ºå†…å­˜å±€éƒ¨æ€§å’Œæ•°æ®ç»“æ„ä¼˜åŒ–

4. **Result Writing å¼€é”€è¢«ä½ä¼°**
   - Integrated Mode: 11.92ms
   - Plugin Mode: 0.05ms
   - å¦‚æœéœ€è¦æŒä¹…åŒ–ï¼Œè¿™æ˜¯å¿…è¦ä»£ä»·

### æ¶æ„é€‰æ‹©å»ºè®®

**ä½¿ç”¨ Plugin Mode å½“**ï¼š
- éœ€è¦æ¯«ç§’çº§å»¶è¿Ÿ
- åªéœ€è¦æœ€ç»ˆèšåˆç»“æœ
- æ•°æ®å¯ä»¥å®Œå…¨åœ¨å†…å­˜ä¸­å¤„ç†

**ä½¿ç”¨ Integrated Mode å½“**ï¼š
- éœ€è¦æŒä¹…åŒ–æ‰€æœ‰ç»“æœ
- æ•°æ®é‡è¶…è¿‡å†…å­˜å®¹é‡
- éœ€è¦ä¸å…¶ä»–æ•°æ®åº“åŠŸèƒ½é›†æˆï¼ˆæŸ¥è¯¢ã€åˆ†æï¼‰

**æ··åˆæ–¹æ¡ˆï¼ˆæ¨èï¼‰**ï¼š
- ä½¿ç”¨ Plugin Mode è¿›è¡Œå®æ—¶å¤„ç†
- å®šæœŸå°†ç»“æœæŒä¹…åŒ–åˆ° Integrated Mode
- å…¼é¡¾å®æ—¶æ€§å’ŒæŒä¹…åŒ–éœ€æ±‚
